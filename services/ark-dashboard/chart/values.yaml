# ARK Dashboard chart values

# Global annotations added to all resources
global:
  annotations:
    ark.mckinsey.com/service: ark-dashboard

# Application configuration
app:
  name: ark-dashboard
  image:
    repository: ark-dashboard
    tag: latest
    pullPolicy: IfNotPresent
  
  # Environment variables
  env:
    - name: NODE_ENV
      value: "production"
    - name: PORT
      value: "3000"
    - name: HOSTNAME
      value: "0.0.0.0"
    - name: ARK_API_SERVICE_HOST
      value: "ark-api.default.svc.cluster.local"
    - name: ARK_API_SERVICE_PORT
      value: "80"
    - name: ARK_API_SERVICE_PROTOCOL
      value: "http"
  
  # Optional: Import entire secrets/configmaps as env vars
  # envFrom:
  #   - secretRef:
  #       name: dashboard-secrets
  #       optional: true
  
  # Resource configuration
  # For production: Dashboard serves pre-built static files so memory can be low
  # For in-cluster local development: Increase limits to at least 1.5GB for Next.js + Turbopack compilation
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"  # Production: pre-built files are memory efficient
      cpu: "500m"

# Service account configuration
serviceAccount:
  create: true
  name: ark-dashboard-sa

# Service configuration
service:
  name: ark-dashboard
  type: ClusterIP
  port: 3000
  targetPort: 3000

# Gateway configuration for HTTPRoute
gateway:
  # Namespace where localhost-gateway is installed
  namespace: ark-system
  # Gateway name to reference
  name: localhost-gateway

# HTTPRoute configuration
routes:
- name: dashboard-root
  hostname: "127.0.0.1.nip.io"
  description: "Routes root domain traffic to dashboard"
- name: dashboard
  hostname: "dashboard.127.0.0.1.nip.io"
  description: "Routes dashboard service traffic"
- name: dashboard-default
  hostname: "dashboard.default.127.0.0.1.nip.io"
  description: "Routes dashboard with explicit namespace"